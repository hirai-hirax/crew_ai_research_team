
coordinate_planning:
  description: >
    週末お出かけプランの全体調整を行う。
    
    **目標:**
    ユーザーの要望({location}, {interests}, {budget}, {companions}, {date}, {home}, {departure_time}, {return_time})
    に基づいて、実現可能で魅力的なお出かけプランを作成する。
    
    **調整内容:**
    1. 天気情報の収集と分析
    2. イベント・施設の調査
    3. 候補の絞り込みと優先順位付け
    4. 交通手段の計画
    5. 最終的なしおりの作成
    
    **品質基準:**
    - ユーザーの時間制約({departure_time}〜{return_time})を厳守
    - 予算({budget})を超えない
    - 同伴者({companions})に適した内容
    - 天気を考慮した現実的なプラン
    - 移動時間と滞在時間のバランスが取れている
    
    **タスク委譲の手順:**
    各専門エージェントにタスクを委任する際は、具体的な文字列でタスクとコンテキストを記述してください。
    
    例1 - 天気予報士への委譲:
    task: "2025年1月15日の東京23区の天気予報を詳細に調査し、屋外アクティビティの可否を判断してください"
    context: "ユーザーは友人1人とカフェ巡りを計画しています。予算は1万円、出発時間は10:00、帰宅希望時間は17:00です。"
    coworker: "お出かけ天気予報士"
    
    例2 - ローカルスカウトへの委譲:
    task: "2025年1月15日に東京23区で開催されるカフェ関連のイベントや人気施設を5件以上調査してください"
    context: "友人1人との外出、予算1万円、興味はカフェ巡りとアート。天気は晴れ予報なので屋外も検討可能です。"
    coworker: "ローカルイベントスカウト"
    
    各専門エージェントの結果を統合して、完成度の高いお出かけプランをまとめあげること。
  expected_output: >
    完全なお出かけプランの概要。
    天気情報、選定された候補、交通プラン、タイムラインを含む統合レポート。
  agent: planning_manager

fetch_weather:
  description: >
    指定された日付({date})の対象エリア({location})の天気予報を詳細に調査してください。
    
    **必須: Open-Meteo APIツール「天気予報取得」を使用してください。**
    このツールは、location={location}、date={date}を指定することで、
    正確な天気情報を構造化された形式で取得できます。APIキーは不要です。
    
    取得する情報:
    - 天気（晴れ/雨など）
    - 最高気温・最低気温
    - 降水確率（時間帯による変化）
    - 風速・湿度情報
    - 時間帯別の詳細予報
    
    これらを元に、屋外アクティビティの可否、雨天リスク、最適な服装・持ち物を具体的に助言してください。
    APIツールが自動的に生成する「お出かけアドバイス」も必ず含めてください。
    
    補足情報が必要な場合のみ、Web検索ツールを使用してください。
  expected_output: >
    マークダウン形式の天気サマリー。
    - 概要(晴/曇/雨など)
    - 最高/最低気温と体感温度、降水確率、風速
    - 時間帯別の詳細予報
    - 服装・持ち物・屋内/屋外の推奨
    - お出かけアドバイス
  agent: weather_specialist

explore_local_options:
  description: >
    指定日: {date}
    エリア({location})で開催予定のイベント・施設・新店を調査する。
    条件: 興味 {interests} / 予算 {budget} / 同伴者 {companions}

    - 指定日({date})に実施可能なイベントや常設施設を5件以上ピックアップ
    - 各件について「名称・エリア/最寄駅・開催日時/営業時間・予算目安・屋内/屋外・予約要否・URL」をまとめる
    - インドア向き/アウトドア向きの分類を必ず入れる
  expected_output: >
    テーブル形式の選択肢リスト。
    列: 候補名 | カテゴリ | 屋内/屋外 | 開催/営業時間 | 予算目安 | 予約要否 | 最寄駅/エリア | URL
  agent: local_scout

craft_recommendations:
  description: >
    天気サマリー、カレンダー傾向、ローカル候補リストを統合し、指定日({date})のお出かけ候補を3件に絞る。
    - 1位を「本命」、2位を「気分転換」、3位を「雨天・混雑回避」として提案
    - 各候補に「選定理由(天気/好み/距離/同行者)」「推定総予算」「所要時間」「予約の要/不要」を添える
    - カレンダー傾向から外れすぎないよう配慮しつつ、マンネリ打破案も1件入れる
  expected_output: >
    箇条書きの候補3件リスト。
    各候補にタイトル・選定理由・所要時間・概算費用・注意点(予約/混雑/雨天代替)を含める。
    1件は必ず屋内向きとする。
  agent: recommendation_curator

plan_transport:
  description: >
    上記の本命候補を起点に、自宅({home})からの交通手段を比較する。
    
    **時間制約:**
    - 出発希望時間: {departure_time}
    - 帰宅希望時間: {return_time}
    
    **Google Maps APIツールを活用して正確な情報を取得:**
    - 出発地: {home} (ユーザーの自宅住所)
    - まず「Google Maps複数手段比較」ツールで、自動車・公共交通機関・徒歩の所要時間を一覧比較
    - 次に「Google Maps経路検索」ツールで、主要な移動手段の詳細ルートを取得
    - 自動車: 通常時と渋滞時の所要時間、駐車場の有無
    - 公共交通機関: 最適ルート、乗換回数、具体的な路線名、運賃、時刻表
    - 徒歩: 所要時間と距離
    
    各手段について、指定された出発時間({departure_time})と帰宅希望時間({return_time})に基づいて:
    - 出発時刻と到着時刻
    - 帰りの出発時刻と到着時刻
    - 終電/最終バス時刻の確認
    - 滞在可能時間の算出
    
    雨天時のリスク(徒歩距離が長い場合など)も考慮すること。
  expected_output: >
    テーブル形式の交通プラン。列: 手段 | ルート概要 | 所要時間 | 概算料金 | 出発/終電目安 | メモ(雨天・混雑)
  agent: transport_planner

build_itinerary:
  description: >
    最終的なおでかけのしおりを作成する。
    
    **時間制約を考慮:**
    - 出発時間: {departure_time}
    - 帰宅希望時間: {return_time}
    
    - タイムライン形式で「時間 | アクティビティ | 所要 | 移動 | 予算メモ」を1日の流れとして示す
    - {departure_time}に自宅を出発し、{return_time}までに帰宅できるスケジュールを組む
    - 移動時間、滞在時間、休憩時間を考慮した現実的なタイムラインを作成
    - 代替案ブロック(雨天/疲労時)を必ず追加
    - 持ち物リスト、連絡先(施設/タクシー/同行者連絡手段)、チェックリストを添える
  expected_output: >
    マークダウン形式のしおり。
    セクション: 1日のタイムライン / 交通メモ / 予算サマリー / 代替案 / 持ち物 / 連絡先 / 最終確認チェックリスト
  agent: itinerary_designer
  output_file: output/weekend_itinerary_{date}.md
